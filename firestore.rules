/**
 * Core Philosophy: This ruleset enforces a public, read-only data model. 
 * The primary goal is to make all interview questions in the database publicly
 * accessible for reading, while strictly prohibiting any and all modifications
 * (creation, updates, deletion) from client-side applications. This ensures
 * data integrity for the question bank.
 *
 * Data Structure: The data is organized in a single top-level collection 
 * named `questions`. Each document within this collection represents a unique
 * interview question.
 *
 * Key Security Decisions:
 * - Public Read Access: All users, whether authenticated or anonymous, are 
 *   granted permission to read individual questions (`get`) and query the 
 *   entire list of questions (`list`).
 * - No Client-Side Writes: All write operations (`create`, `update`, `delete`)
 *   are explicitly denied. This assumes that the question data is managed
 *   through a trusted server environment (e.g., Admin SDK) and not by end-users.
 * - No Data Validation: In line with the prototyping philosophy, these rules
 *   do not validate the shape or type of data, as all client-side writes are
 *   disallowed.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // ----------------------------------------------------------------------
    // Helper Functions
    // ----------------------------------------------------------------------

    // ----------------------------------------------------------------------
    // Collection Rules
    // ----------------------------------------------------------------------

    /**
     * @description Provides public, read-only access to all interview questions.
     * @path        /questions/{questionId}
     * @allow       (get, list) Any user, authenticated or not, can read a question or list all questions.
     * @deny        (create, update, delete) Any user attempting to modify the question bank will be denied.
     * @principle   Secures the question bank as a public, read-only dataset, preventing any client-side modifications.
     */
    match /questions/{questionId} {
      allow get: if true;
      allow list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }
  }
}